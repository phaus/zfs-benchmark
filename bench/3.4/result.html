<!DOCTYPE html>
<html lang="en">
<head>
<title>Benchmark 3.4</title>

<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

<!-- Optional theme -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous">
<style type"text/css">body { padding-top: 70px; }a.anchor { margin-top:60px; top: -60px; position: relative; visibility: hidden;}.center { text-align:center; }td.header {text-align: center; backgroundcolor: "#CCFFFF" }td.rowheader {text-align: center; backgroundcolor: "#CCCFFF" }td.size {text-align: center; backgroundcolor: "#CCCFFF" }td.ksec {text-align: center; fontstyle: italic }</style>
</head>
<body>
<nav class="navbar navbar-default navbar-fixed-top">
<div class="container-fluid">
<div class="navbar-header">
<a class="navbar-brand" href="../index.html">
back to Index
</a>
</div>
<div class="collapse navbar-collapse">
<ul class="nav navbar-nav">
<li><a href="#3.4_details">Details</a></li>
<li><a href="#3.4_pool_setup">Pool Setup</a></li>
<li><a href="#3.4_dd">DD</a></li>
<li><a href="#3.4_boonie">Boonie</a></li>
<li><a href="#3.4_cleanup">Cleanup</a></li>
</ul>
</div>
</div>
</nav>
<div class="container">
<div class="row">
<div class="col-md-10">
<h1>3.4</h1>
<a class="anchor" aria-hidden="true" id="3.4_details"></a> <h2><small><a href="#3.4_details">#</a></small>Details</h2>
<p class="cmd">
<kbd>echo "init " && date</kbd>
<br />
<samp><pre>init 
Sun Dec 20 00:53:23 CET 2015
</pre></samp>
</p>
<a class="anchor" aria-hidden="true" id="3.4_pool_setup"></a> <h2><small><a href="#3.4_pool_setup">#</a></small>Pool Setup</h2>
<p class="cmd">
<kbd>/sbin/zpool create tank raidz /dev/sda /dev/sdb /dev/sde /dev/sdf</kbd>
<br />
<samp><pre></pre></samp>
</p>
<p class="cmd">
<kbd>/sbin/zpool add tank cache /dev/sdc /dev/sdg</kbd>
<br />
<samp><pre></pre></samp>
</p>
<p class="cmd">
<kbd>/sbin/zpool add -f tank log /dev/sdd</kbd>
<br />
<samp><pre></pre></samp>
</p>
<p class="cmd">
<kbd>/sbin/zpool status</kbd>
<br />
<samp><pre>  pool: tank
 state: ONLINE
  scan: none requested
config:

	NAME        STATE     READ WRITE CKSUM
	tank        ONLINE       0     0     0
	  raidz1-0  ONLINE       0     0     0
	    sda     ONLINE       0     0     0
	    sdb     ONLINE       0     0     0
	    sde     ONLINE       0     0     0
	    sdf     ONLINE       0     0     0
	logs
	  sdd       ONLINE       0     0     0
	cache
	  sdc       ONLINE       0     0     0
	  sdg       ONLINE       0     0     0

errors: No known data errors
</pre></samp>
</p>
<p class="cmd">
<kbd>/sbin/zpool list</kbd>
<br />
<samp><pre>NAME   SIZE  ALLOC   FREE  EXPANDSZ   FRAG    CAP  DEDUP  HEALTH  ALTROOT
tank  3.62T  1.08M  3.62T         -     0%     0%  1.00x  ONLINE  -
</pre></samp>
</p>
<p class="cmd">
<kbd>/sbin/zfs list</kbd>
<br />
<samp><pre>NAME   USED  AVAIL  REFER  MOUNTPOINT
tank   418K  2.55T   140K  /tank
</pre></samp>
</p>
<a class="anchor" aria-hidden="true" id="3.4_boonie"></a> <h2><small><a href="#3.4_boonie">#</a></small>Boonie</h2>
<p class="cmd">
<kbd>echo "start " && date</kbd>
<br />
<samp><pre>start 
Sun Dec 20 00:53:25 CET 2015
</pre></samp>
</p>
<p class="cmd">
<kbd>(top -b -n 1 | head -n 20) </kbd>
<br />
<samp><pre>top - 00:53:25 up  2:14,  1 user,  load average: 2.05, 2.22, 2.25
Tasks: 738 total,   2 running, 736 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.0 us,  4.3 sy,  0.0 ni, 89.7 id,  6.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem:   8163292 total,   900396 used,  7262896 free,    20760 buffers
KiB Swap:   286716 total,        0 used,   286716 free.    70092 cached Mem

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
 9115 root      20   0   26844   3312   2468 R   5.9  0.0   0:00.02 top
    1 root      20   0   33492   4068   2684 S   0.0  0.0   0:03.35 init
    2 root      20   0       0      0      0 S   0.0  0.0   0:00.10 kthreadd
    3 root      20   0       0      0      0 S   0.0  0.0   0:00.32 ksoftirqd/0
    5 root       0 -20       0      0      0 S   0.0  0.0   0:00.00 kworker/0:+
    6 root      20   0       0      0      0 S   0.0  0.0   0:00.00 kworker/u6+
    8 root      20   0       0      0      0 R   0.0  0.0   0:01.14 rcu_sched
    9 root      20   0       0      0      0 S   0.0  0.0   0:00.46 rcuos/0
   10 root      20   0       0      0      0 S   0.0  0.0   0:00.20 rcuos/1
   11 root      20   0       0      0      0 S   0.0  0.0   0:00.18 rcuos/2
   12 root      20   0       0      0      0 S   0.0  0.0   0:00.17 rcuos/3
   13 root      20   0       0      0      0 S   0.0  0.0   0:00.26 rcuos/4
   14 root      20   0       0      0      0 S   0.0  0.0   0:00.34 rcuos/5
</pre></samp>
</p>
<p class="cmd">
<kbd>/usr/sbin/bonnie++ -d /tank -r 8192 -n 128 -u root >> bench/3.4/boonie.csv</kbd>
<br />
<kbd>/usr/bin/bon_csv2html bench/3.4/boonie.csv > bench/3.4/boonie.html</kbd>
<br />
<table border="3" cellpadding="2" cellspacing="1"><tr><td colspan="2" class="header"><font size=+1><b>Version 1.97</b></font></td><td colspan="6" class="header"><font size=+2><b>Sequential Output</b></font></td><td colspan="4" class="header"><font size=+2><b>Sequential Input</b></font></td><td colspan="2" rowspan="2" class="header"><font size=+2><b>Random<br>Seeks</b></font></td><td colspan="1" class="header"></td><td colspan="6" class="header"><font size=+2><b>Sequential Create</b></font></td><td colspan="6" class="header"><font size=+2><b>Random Create</b></font></td></tr>
<tr><td></td><td>Size</td><td colspan="2">Per Char</td><td colspan="2">Block</td><td colspan="2">Rewrite</td><td colspan="2">Per Char</td><td colspan="2">Block</td><td>Num Files</td><td colspan="2">Create</td><td colspan="2">Read</td><td colspan="2">Delete</td><td colspan="2">Create</td><td colspan="2">Read</td><td colspan="2">Delete</td></tr><tr><td colspan="2"></td><td class="ksec"><font size=-2>K/sec</font></td><td class="ksec"><font size=-2>% CPU</font></td><td class="ksec"><font size=-2>K/sec</font></td><td class="ksec"><font size=-2>% CPU</font></td><td class="ksec"><font size=-2>K/sec</font></td><td class="ksec"><font size=-2>% CPU</font></td><td class="ksec"><font size=-2>K/sec</font></td><td class="ksec"><font size=-2>% CPU</font></td><td class="ksec"><font size=-2>K/sec</font></td><td class="ksec"><font size=-2>% CPU</font></td><td class="ksec"><font size=-2>/sec</font></td><td class="ksec"><font size=-2>% CPU</font></td><td colspan="1"></td><td class="ksec"><font size=-2>/sec</font></td><td class="ksec"><font size=-2>% CPU</font></td><td class="ksec"><font size=-2>/sec</font></td><td class="ksec"><font size=-2>% CPU</font></td><td class="ksec"><font size=-2>/sec</font></td><td class="ksec"><font size=-2>% CPU</font></td><td class="ksec"><font size=-2>/sec</font></td><td class="ksec"><font size=-2>% CPU</font></td><td class="ksec"><font size=-2>/sec</font></td><td class="ksec"><font size=-2>% CPU</font></td><td class="ksec"><font size=-2>/sec</font></td><td class="ksec"><font size=-2>% CPU</font></td></tr>
<tr><td rowspan="2" bgcolor="#FFFFFF" class="rowheader"><font size=+1>dl380</td><td class="size" bgcolor="#FFFFFF">16G</td><td>140</td><td>99</td><td>274955</td><td>57</td><td>110872</td><td>23</td><td>444</td><td>98</td><td>245593</td><td>18</td><td>487.5</td><td>26</td><td class="size" bgcolor="#FFFFFF">128</td><td>17345</td><td>99</td><td>+++++</td><td>+++</td><td>16827</td><td>99</td><td>16984</td><td>99</td><td>+++++</td><td>+++</td><td>13975</td><td>99</td></tr>
<tr><td class="size" bgcolor="#FFFFFF" colspan="1">Latency</td><td colspan="2">62477us</td><td colspan="2">19807us</td><td colspan="2">560ms</td><td colspan="2">107ms</td><td colspan="2">239ms</td><td colspan="2">172ms</td><td class="size" bgcolor="#FFFFFF" colspan="1">Latency</td><td colspan="2">151ms</td><td colspan="2">329us</td><td colspan="2">977us</td><td colspan="2">89528us</td><td colspan="2">197us</td><td colspan="2">1692us</td></tr>
</table>
</p>
<p class="cmd">
<kbd>(top -b -n 1 | head -n 20) </kbd>
<br />
<samp><pre>top - 00:59:27 up  2:20,  1 user,  load average: 1.57, 1.84, 2.08
Tasks: 732 total,   1 running, 731 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.0 us,  4.4 sy,  0.0 ni, 89.5 id,  6.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem:   8163292 total,  1206988 used,  6956304 free,    20880 buffers
KiB Swap:   286716 total,        0 used,   286716 free.    69804 cached Mem

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
 8701 root       0 -20       0      0      0 S   5.9  0.0   0:03.18 z_null_int
 9133 root      20   0   26844   3312   2472 R   5.9  0.0   0:00.02 top
    1 root      20   0   33492   4068   2684 S   0.0  0.0   0:03.35 init
    2 root      20   0       0      0      0 S   0.0  0.0   0:00.10 kthreadd
    3 root      20   0       0      0      0 S   0.0  0.0   0:00.34 ksoftirqd/0
    5 root       0 -20       0      0      0 S   0.0  0.0   0:00.00 kworker/0:+
    6 root      20   0       0      0      0 S   0.0  0.0   0:00.00 kworker/u6+
    8 root      20   0       0      0      0 S   0.0  0.0   0:01.20 rcu_sched
    9 root      20   0       0      0      0 S   0.0  0.0   0:00.48 rcuos/0
   10 root      20   0       0      0      0 S   0.0  0.0   0:00.25 rcuos/1
   11 root      20   0       0      0      0 S   0.0  0.0   0:00.20 rcuos/2
   12 root      20   0       0      0      0 S   0.0  0.0   0:00.18 rcuos/3
   13 root      20   0       0      0      0 S   0.0  0.0   0:00.26 rcuos/4
</pre></samp>
</p>
<p class="cmd">
<kbd>echo "end " && date</kbd>
<br />
<samp><pre>end 
Sun Dec 20 00:59:27 CET 2015
</pre></samp>
</p>
<a class="anchor" aria-hidden="true" id="3.4_dd"></a> <h2><small><a href="#3.4_dd">#</a></small>DD</h2>
<p class="cmd">
<kbd>echo "start " && date</kbd>
<br />
<samp><pre>start 
Sun Dec 20 00:59:27 CET 2015
</pre></samp>
</p>
<p class="cmd">
<kbd>(top -b -n 1 | head -n 20) </kbd>
<br />
<samp><pre>top - 00:59:28 up  2:20,  1 user,  load average: 1.57, 1.84, 2.08
Tasks: 732 total,   1 running, 731 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.0 us,  4.4 sy,  0.0 ni, 89.5 id,  6.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem:   8163292 total,  1206664 used,  6956628 free,    20880 buffers
KiB Swap:   286716 total,        0 used,   286716 free.    69804 cached Mem

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
 9141 root      20   0   26844   3380   2536 R   6.0  0.0   0:00.02 top
    1 root      20   0   33492   4068   2684 S   0.0  0.0   0:03.35 init
    2 root      20   0       0      0      0 S   0.0  0.0   0:00.10 kthreadd
    3 root      20   0       0      0      0 S   0.0  0.0   0:00.34 ksoftirqd/0
    5 root       0 -20       0      0      0 S   0.0  0.0   0:00.00 kworker/0:+
    6 root      20   0       0      0      0 S   0.0  0.0   0:00.00 kworker/u6+
    8 root      20   0       0      0      0 S   0.0  0.0   0:01.20 rcu_sched
    9 root      20   0       0      0      0 S   0.0  0.0   0:00.48 rcuos/0
   10 root      20   0       0      0      0 S   0.0  0.0   0:00.25 rcuos/1
   11 root      20   0       0      0      0 S   0.0  0.0   0:00.20 rcuos/2
   12 root      20   0       0      0      0 S   0.0  0.0   0:00.18 rcuos/3
   13 root      20   0       0      0      0 S   0.0  0.0   0:00.26 rcuos/4
   14 root      20   0       0      0      0 S   0.0  0.0   0:00.34 rcuos/5
</pre></samp>
</p>
<p class="cmd">
<kbd>(time sh -c "dd if=/dev/zero of=/tank/tmp bs=4k count=2097152 && sync") </kbd>
<br />
<samp><pre>2097152+0 records in
2097152+0 records out
8589934592 bytes (8.6 GB) copied, 27.4505 s, 313 MB/s
0.46user 24.20system 0:30.60elapsed 80%CPU (0avgtext+0avgdata 2028maxresident)k
0inputs+16777216outputs (0major+292minor)pagefaults 0swaps
</pre></samp>
</p>
<p class="cmd">
<kbd>(top -b -n 1 | head -n 20) </kbd>
<br />
<samp><pre>top - 00:59:58 up  2:21,  1 user,  load average: 2.02, 1.92, 2.10
Tasks: 732 total,   1 running, 731 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.0 us,  4.5 sy,  0.0 ni, 89.5 id,  6.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem:   8163292 total,  5154784 used,  3008508 free,    20896 buffers
KiB Swap:   286716 total,        0 used,   286716 free.    69820 cached Mem

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
 8829 root       0 -20       0      0      0 S   6.0  0.0   0:01.41 z_wr_int_0
 8830 root       0 -20       0      0      0 S   6.0  0.0   0:01.38 z_wr_int_0
 8832 root       0 -20       0      0      0 S   6.0  0.0   0:01.37 z_wr_int_0
 8835 root       0 -20       0      0      0 S   6.0  0.0   0:01.37 z_wr_int_1
 8841 root       0 -20       0      0      0 S   6.0  0.0   0:01.37 z_wr_int_1
 8846 root       0 -20       0      0      0 S   6.0  0.0   0:01.42 z_wr_int_1
 8852 root       0 -20       0      0      0 S   6.0  0.0   0:01.36 z_wr_int_2
 8854 root       0 -20       0      0      0 S   6.0  0.0   0:01.34 z_wr_int_2
 8862 root       0 -20       0      0      0 S   6.0  0.0   0:01.38 z_wr_int_3
 8863 root       0 -20       0      0      0 S   6.0  0.0   0:01.37 z_wr_int_3
 8879 root       0 -20       0      0      0 S   6.0  0.0   0:01.41 z_wr_int_4
 8887 root       0 -20       0      0      0 S   6.0  0.0   0:01.37 z_wr_int_5
 8890 root       0 -20       0      0      0 S   6.0  0.0   0:01.36 z_wr_int_5
</pre></samp>
</p>
<p class="cmd">
<kbd>(time sh -c "dd if=/tank/tmp of=/dev/null bs=4k") </kbd>
<br />
<samp><pre>2097152+0 records in
2097152+0 records out
8589934592 bytes (8.6 GB) copied, 25.4531 s, 337 MB/s
0.30user 7.92system 0:25.45elapsed 32%CPU (0avgtext+0avgdata 2036maxresident)k
16946318inputs+0outputs (0major+194minor)pagefaults 0swaps
</pre></samp>
</p>
<p class="cmd">
<kbd>(top -b -n 1 | head -n 20) </kbd>
<br />
<samp><pre>top - 01:00:24 up  2:21,  1 user,  load average: 1.67, 1.84, 2.07
Tasks: 732 total,   1 running, 731 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.0 us,  4.5 sy,  0.0 ni, 89.5 id,  6.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem:   8163292 total,  5071480 used,  3091812 free,    20912 buffers
KiB Swap:   286716 total,        0 used,   286716 free.    69824 cached Mem

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
 9158 root      20   0   26844   3252   2408 R   6.0  0.0   0:00.02 top
    1 root      20   0   33492   4068   2684 S   0.0  0.0   0:03.35 init
    2 root      20   0       0      0      0 S   0.0  0.0   0:00.10 kthreadd
    3 root      20   0       0      0      0 S   0.0  0.0   0:00.34 ksoftirqd/0
    5 root       0 -20       0      0      0 S   0.0  0.0   0:00.00 kworker/0:+
    6 root      20   0       0      0      0 S   0.0  0.0   0:00.00 kworker/u6+
    8 root      20   0       0      0      0 S   0.0  0.0   0:01.20 rcu_sched
    9 root      20   0       0      0      0 S   0.0  0.0   0:00.48 rcuos/0
   10 root      20   0       0      0      0 S   0.0  0.0   0:00.25 rcuos/1
   11 root      20   0       0      0      0 S   0.0  0.0   0:00.20 rcuos/2
   12 root      20   0       0      0      0 S   0.0  0.0   0:00.18 rcuos/3
   13 root      20   0       0      0      0 S   0.0  0.0   0:00.26 rcuos/4
   14 root      20   0       0      0      0 S   0.0  0.0   0:00.34 rcuos/5
</pre></samp>
</p>
<p class="cmd">
<kbd>echo "end " && date</kbd>
<br />
<samp><pre>end 
Sun Dec 20 01:00:24 CET 2015
</pre></samp>
</p>
<a class="anchor" aria-hidden="true" id="3.4_cleanup"></a> <h2><small><a href="#3.4_cleanup">#</a></small>Cleanup</h2>
<p class="cmd">
<kbd>/sbin/zpool destroy -f tank</kbd>
<br />
<samp><pre></pre></samp>
</p>
<p class="cmd">
<kbd>echo "done " && date</kbd>
<br />
<samp><pre>done 
Sun Dec 20 01:00:24 CET 2015
</pre></samp>
</p>
</div>
<div class="col-md-2">
</div>
</div>
</div>
<div class="container-fluid">
<div class="center row">&copy; 2015 Philipp Haussleiter</div>
</div>

</body>
</html>
